# MCP Server configuration
spring.ai.mcp.server.name=mcp-calendar-server
spring.ai.mcp.server.version=0.2.0
spring.ai.mcp.server.type=SYNC
spring.ai.mcp.server.transport.type=SSE
spring.ai.mcp.server.external-url=${SERVER_EXTERNAL_URL:http://localhost:3500}

# Habilitando actuator para monitoramento
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# Configurações do banco de dados
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://178.156.146.193:5432/callback_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:71d14724653158e0e40fd03f522ac11c}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate configuração
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Configuração do servidor
server.port=${SERVER_PORT:3500}
server.address=0.0.0.0
server.ssl.enabled=false

# Configurações para proxy reverso
server.forward-headers-strategy=FRAMEWORK
server.tomcat.remoteip.remote-ip-header=X-Forwarded-For
server.tomcat.remoteip.protocol-header=X-Forwarded-Proto

# Configurações específicas para SSE
spring.mvc.async.request-timeout=-1
server.tomcat.max-threads=200
server.tomcat.max-connections=10000

# Configuração de CORS para SSE
spring.web.cors.allowed-origins=*
spring.web.cors.allowed-methods=GET,POST,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.exposed-headers=*
spring.web.cors.allow-credentials=false
spring.web.cors.max-age=3600

# Configuração de logging
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.chatgm.com.mcp_server=${LOG_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOG_LEVEL_SPRING_WEB:DEBUG}
logging.level.org.hibernate=${LOG_LEVEL_HIBERNATE:INFO}
logging.level.org.springframework.ai=${LOG_LEVEL_SPRING_AI:DEBUG}

# Logging adicional para depuração
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG
logging.level.org.springframework.web.servlet.DispatcherServlet=DEBUG
logging.level.org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping=DEBUG

# Configuração de timeout para WebClient e RestTemplate
webclient.timeout.connect=5000
webclient.timeout.read=5000
webclient.timeout.write=5000

# Configuração para utilização do processador de templates
spring.jackson.default-property-inclusion=non_null
spring.mvc.pathmatch.matching-strategy=ant_path_matcher
